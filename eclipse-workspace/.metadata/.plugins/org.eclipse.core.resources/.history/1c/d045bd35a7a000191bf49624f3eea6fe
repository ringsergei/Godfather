import org.json.JSONObject;
import org.json.JSONArray;
import org.json.JSONTokener;

import java.io.*;
import java.io.FileWriter;




public class DBmanager {
	
	private String resourceName = "src/databases/";

	public static void main(String[] args) {
		try {
		    /*jo.put("name", "jon doe");
		    jo.put("age", "22");
		    jo.put("city", "chicago");*/
			//String str = "{\"name\" : \"Billie\", \"surname\" : \"Eilish\"}";
			/*
	        JSONArray ja = new JSONArray(tokener);
	        int len = ja.length();
	        for( int i = 0; i < ja.length(); i++ ) {
	        	JSONObject jo = ja.getJSONObject(i);
	        	System.out.println(jo);
	        }*/
	        //First Employee
			
            
			DBmanager db = new DBmanager();
			variantModel variant = new variantModel();
			//variant.fromJSObject(db.getSource("test", 1));
			//variant.getTask(1);
			//variant.getTask(2);
			//variant.getTask(3);
			variant.tasks = new String[] {"Billie", "Eilish", "nomber one"};
		}catch(Exception ex) {System.out.println(ex);}
	}



    public JSONObject getSource(String databaseName, int number) {
    	String database = resourceName + databaseName + ".json";
    	try {
    		FileInputStream fstream = new FileInputStream(database);
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            JSONTokener tokener = new JSONTokener(br);
            JSONArray all_variants = new JSONObject(tokener).getJSONArray("items");
            JSONObject needed_var = all_variants.getJSONObject(number-1);
            return needed_var;
    	}catch(Exception ex) {
    		System.out.println(ex);
    		return null;
    	}
    
    }
    
    public void sendSource(String databaseName, JSONObject jObject) {
    	String database = resourceName + databaseName + ".json";
    	try {
    	    FileInputStream fstream = new FileInputStream(database);
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
            JSONTokener tokener = new JSONTokener(br);
            JSONArray ja = new JSONObject(tokener).getJSONArray("items");
            
            ja.put(jObject);
		
            try (FileWriter file = new FileWriter(database)) {
	        	 
            	file.write(ja.toString());
            	file.flush();
	 
            } catch (IOException e) {
            	e.printStackTrace();
            	System.out.println(e);
            }
    	}catch(Exception ex) {}
    }
    
}
